FROM node:14

WORKDIR /app

COPY package.json .

RUN npm install

COPY . .

ARG DEFAULT_APP_PORT=80
ARG DEFAULT_APP_NAME="Goals App"

ENV APP_MONGODB_CONTAINER_NAME=mongodb-con
ENV APP_MONGODB_USERNAME=mongo
ENV APP_MONGODB_PASSWORD=mongo
ENV APP_PORT=$DEFAULT_APP_PORT
ENV APP_NAME=$DEFAULT_APP_NAME

EXPOSE $APP_PORT

CMD ["npm", "start"]
